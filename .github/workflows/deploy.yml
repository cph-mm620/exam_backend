# This is a basic workflow to help you get started with Actions

name: Build & Deploy

# Controls when the workflow will run
on:
  # Triggers the workflow on push or pull request events but only for the "main" branch
  push:
    branches: ["main"]

  # Allows you to run this workflow manually from the Actions tab

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:

deploy: 
  
  runs-on: ubuntu-latest
 
    steps:
      - name: Deploy NodeJS app
      uses: appleboy/ssh-action@v@-1-2
      
      with: 
      host: ${{secrets.SSH_HOST}} 
      key: ${{secrets.SSH_KEY}}
      username: ${{secrets.SSH_USERNAME}}
      
      script: |
      mkdir test
      cd test
      git clone git@github.com:cph-mm620/exam_backend.git
      echo 'Deployment successful to digital ocean'


